{"ast":null,"code":"import { getEmployees, getTransactionsPaginated, getTransactionsByEmployee, setTransactionApproval } from \"./requests\";\nconst timeout = getTimeout();\nconst mockTimeout = 1 * timeout;\nexport function fakeFetch(endpoint, params) {\n  return new Promise((resolve, reject) => {\n    mockApiLogger({\n      message: \"Loading request\",\n      data: {\n        endpoint,\n        params\n      },\n      type: \"info\"\n    });\n    let result;\n    try {\n      switch (endpoint) {\n        case \"employees\":\n          result = getEmployees();\n          setTimeout(() => {\n            mockApiLogger({\n              data: {\n                endpoint,\n                params,\n                result\n              }\n            });\n            resolve(result);\n          }, mockTimeout);\n          break;\n        case \"paginatedTransactions\":\n          result = getTransactionsPaginated(params);\n          setTimeout(() => {\n            mockApiLogger({\n              data: {\n                endpoint,\n                params,\n                result\n              }\n            });\n            resolve(result);\n          }, mockTimeout * 2.5);\n          break;\n        case \"transactionsByEmployee\":\n          result = getTransactionsByEmployee(params);\n          setTimeout(() => {\n            mockApiLogger({\n              data: {\n                endpoint,\n                params,\n                result\n              }\n            });\n            resolve(result);\n          }, mockTimeout * 1.5);\n          break;\n        case \"setTransactionApproval\":\n          result = setTransactionApproval(params);\n          setTimeout(() => {\n            mockApiLogger({\n              data: {\n                endpoint,\n                params,\n                result\n              }\n            });\n            resolve(result);\n          }, mockTimeout * 1);\n          break;\n        default:\n          throw new Error(\"Invalid endpoint\");\n      }\n    } catch (error) {\n      if (error instanceof Error) {\n        mockApiLogger({\n          message: error.message,\n          data: {\n            endpoint,\n            params\n          },\n          type: \"error\"\n        });\n        reject(error.message);\n      }\n    }\n  });\n}\nfunction mockApiLogger({\n  data,\n  message = \"Success request\",\n  type = \"success\"\n}) {\n  if (process.env.REACT_APP_MOCK_REQUEST_LOGS_ENABLED === \"false\") {\n    return;\n  }\n  console.log(`%c--Fake Request Debugger-- %c${message}`, \"color: #717171\", getTitleColor());\n  console.log(data);\n  function getTitleColor() {\n    if (type === \"error\") {\n      return \"color: #d93e3e;\";\n    }\n    if (type === \"info\") {\n      return \"color: #1670d2;\";\n    }\n    return \"color: #548a54;\";\n  }\n}\nfunction getTimeout() {\n  var _ref, _URL$searchParams$get;\n  const timeout = parseInt((_ref = (_URL$searchParams$get = new URL(document.location).searchParams.get(\"timeout\")) !== null && _URL$searchParams$get !== void 0 ? _URL$searchParams$get : process.env.REACT_APP_TIMEOUT_MULTIPLIER) !== null && _ref !== void 0 ? _ref : \"1000\");\n  if (Number.isNaN(timeout)) {\n    return 1000;\n  }\n  return timeout;\n}","map":{"version":3,"names":["getEmployees","getTransactionsPaginated","getTransactionsByEmployee","setTransactionApproval","timeout","getTimeout","mockTimeout","fakeFetch","endpoint","params","Promise","resolve","reject","mockApiLogger","message","data","type","result","setTimeout","Error","error","process","env","REACT_APP_MOCK_REQUEST_LOGS_ENABLED","console","log","getTitleColor","_ref","_URL$searchParams$get","parseInt","URL","document","location","searchParams","get","REACT_APP_TIMEOUT_MULTIPLIER","Number","isNaN"],"sources":["/Users/yashvimehta/Downloads/ramp-fe-challenge/src/utils/fetch.ts"],"sourcesContent":["import {\n  getEmployees,\n  getTransactionsPaginated,\n  getTransactionsByEmployee,\n  setTransactionApproval,\n} from \"./requests\"\nimport { PaginatedRequestParams, RequestByEmployeeParams, SetTransactionApprovalParams } from \"./types\"\n\nconst timeout = getTimeout()\nconst mockTimeout = 1 * timeout\n\nexport function fakeFetch<TData, TParams extends object = object>(\n  endpoint: RegisteredEndpoints,\n  params?: TParams\n): Promise<TData> {\n  return new Promise((resolve, reject) => {\n    mockApiLogger({\n      message: \"Loading request\",\n      data: { endpoint, params },\n      type: \"info\",\n    })\n\n    let result: TData\n\n    try {\n      switch (endpoint) {\n        case \"employees\":\n          result = getEmployees() as unknown as TData\n\n          setTimeout(() => {\n            mockApiLogger({ data: { endpoint, params, result } })\n            resolve(result)\n          }, mockTimeout)\n          break\n\n        case \"paginatedTransactions\":\n          result = getTransactionsPaginated(params as PaginatedRequestParams) as unknown as TData\n\n          setTimeout(() => {\n            mockApiLogger({ data: { endpoint, params, result } })\n            resolve(result)\n          }, mockTimeout * 2.5)\n          break\n\n        case \"transactionsByEmployee\":\n          result = getTransactionsByEmployee(params as RequestByEmployeeParams) as unknown as TData\n\n          setTimeout(() => {\n            mockApiLogger({ data: { endpoint, params, result } })\n            resolve(result)\n          }, mockTimeout * 1.5)\n          break\n\n        case \"setTransactionApproval\":\n          result = setTransactionApproval(params as SetTransactionApprovalParams) as unknown as TData\n\n          setTimeout(() => {\n            mockApiLogger({ data: { endpoint, params, result } })\n            resolve(result)\n          }, mockTimeout * 1)\n          break\n\n        default:\n          throw new Error(\"Invalid endpoint\")\n      }\n    } catch (error) {\n      if (error instanceof Error) {\n        mockApiLogger({\n          message: error.message,\n          data: { endpoint, params },\n          type: \"error\",\n        })\n        reject(error.message)\n      }\n    }\n  })\n}\n\nfunction mockApiLogger({\n  data,\n  message = \"Success request\",\n  type = \"success\",\n}: {\n  message?: string\n  data: object\n  type?: \"success\" | \"error\" | \"info\"\n}) {\n  if (process.env.REACT_APP_MOCK_REQUEST_LOGS_ENABLED === \"false\") {\n    return\n  }\n\n  console.log(`%c--Fake Request Debugger-- %c${message}`, \"color: #717171\", getTitleColor())\n  console.log(data)\n\n  function getTitleColor() {\n    if (type === \"error\") {\n      return \"color: #d93e3e;\"\n    }\n\n    if (type === \"info\") {\n      return \"color: #1670d2;\"\n    }\n\n    return \"color: #548a54;\"\n  }\n}\n\nfunction getTimeout() {\n  const timeout = parseInt(\n    new URL(document.location as unknown as URL).searchParams.get(\"timeout\") ??\n      process.env.REACT_APP_TIMEOUT_MULTIPLIER ??\n      \"1000\"\n  )\n\n  if (Number.isNaN(timeout)) {\n    return 1000\n  }\n\n  return timeout\n}\n\nexport type RegisteredEndpoints =\n  | \"employees\"\n  | \"paginatedTransactions\"\n  | \"transactionsByEmployee\"\n  | \"setTransactionApproval\"\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}